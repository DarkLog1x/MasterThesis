---
- hosts: all
  remote_user: ubuntu
  gather_facts: no
  pre_tasks:
    - name: Update and install python
      apt: pkg={{ item }} state=installed update-cache=yes
      with_items:
        - python
        - python-dev
        - python-setuptools
        - git-core
        - gcc

  tasks:
    - name: ping google
      action: ping

    - name: install pip
      action: easy_install name=pip

    - name: install openstack client
      become: yes
      become_method: sudo
      action: command pip install python-openstackclient

    - name: copy file test
      copy:
        src: /home/groot/Documents/Uppsala/masterThesis/code/python/main.py
        dest: /home/ubuntu/main.py
        owner: ubuntu
        group: ubuntu
        mode: 0755


  handlers:
    - name: ping again
      action: ping
